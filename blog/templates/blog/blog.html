{% extends 'base.html' %}
{% load static %}
{% block title %} Blog {% endblock %}
{% block content %}

<!-- Hero section for blog page -->
<section id="blog-hero-section" class="text-center d-flex align-items-center justify-content-center mb-5">
    <h1 class="fw-bold text-white mx-2">
        Unleashing the<span class="orange-text"> Power</span> of Storytelling
    </h1>
</section>
<!-- <div>
    <h2 class="fw-bold text-center p-2 mb-4 blog-subtitle fs-3">
        Discover<span class="orange-text"> Powerful Stories</span> of Hope and
        Courage
    </h2>
</div> -->
<!-- Main section for blog page -->
<section>
    <div class="container-fluid mb-5">
        <div class="row">
            <div class="col-12 col-xl-3 order-1 order-xl-1 p-2 pt-0">
                <!-- Aside-left card -->
                <aside class="aside-left p-3">
                    <h4 class="mb-4 fw-semibold">Join the Fight Against Cancer</h4>
                    <p>
                        Cancer can be a lonely and difficult journey, but you don't have to go through it alone. At
                        HopeForCancer, we believe that sharing stories and experiences can make a world of difference in
                        the lives of those impacted by cancer. We value respectful and focused
                        discussions that provide accurate information and support. Let's spread knowledge and hope to
                        those affected by cancer and make a positive impact together.
                    </p>
                    <a href="{% url 'create-post' %}"
                        class="create-post-btn hvr-float-shadow d-inline-block my-2">Create Post</a>
                </aside>
            </div>
            <div class="col-12 col-xl-6 order-3 order-xl-2 p-2 p-md-0">
                <!--Blog Posts section -->
                <section id="scroll-section">
                    <!-- Blog post entries -->
                    {% for post in all_posts %}
                    <div class="card mb-5 mx-auto" style="max-width: 24rem">
                        <a href="{% url 'post_detail' post.slug %}"
                            aria-label="internal link when post is clicked to bring to blog post page">
                            {% if "placeholder" in post.featured_image.url %}
                            <img src="{% static 'images/blog_images/support_image.webp' %}" class="card-img-top"
                                alt="{{ post.describe_image }}" />
                            {% else %}
                            <img src="{{ post.featured_image.url }}" class="card-img-top"
                                alt="{{ post.describe_image }}" />
                            {% endif %}
                            <div class="card-body pb-0">
                                <h4 class="card-title post-title fw-bold fs-5">
                                    {{ post.title | capfirst }}</h4>
                                <p class="card-text text-muted">Category# {{ post.category }}</p>
                                <hr />
                                <p class="card-text">
                                    {{ post.content | truncatechars:180 | safe | capfirst }}
                                </p>
                            </div>
                        </a>
                        <div class="card-body pb-1">
                            <strong class="me-4">
                                {% if user.is_authenticated %}
                                <form class="d-inline" action="{% url 'post_like' post.slug %}" method="POST">
                                    {% csrf_token %}
                                    {% if liked %}
                                    <button type="submit" name="post_likes" value="{{post.slug}}"
                                        class="btn-like hvr-icon-pulse"><i
                                            class="fa-solid fa-thumbs-up hvr-icon"></i></button>
                                    {% else %}
                                    <button type="submit" name="post_likes" value="{{post.slug}}"
                                        class="btn-like hvr-icon-pulse"><i
                                            class="fa-regular fa-heart hvr-icon"></i></button>
                                    {% endif %}
                                </form>
                                {% else %}
                                <span><i class="far fa-heart"></i></span>
                                {% endif %}
                                <!-- The number of likes goes before the closing strong tag -->
                                <span>{{ post.number_of_likes }} </span>
                            </strong>
                            <span><i class="fa-regular fa-comment"></i> 0</span>
                        </div>
                        <div class="card-footer">
                            <small class="text-muted me-4">Posted by: {{ post.author | title}}</small>
                            <small class="text-muted">{{ post.created_date }}</small>
                        </div>

                    </div>
                    {% endfor %}
                </section>
            </div>
            <div class="col-12 col-xl-3 order-2 order-xl-3">
                <aside>
                </aside>
            </div>
        </div>
    </div>
</section>
{% endblock %}